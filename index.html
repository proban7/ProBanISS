<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ProBan Interactive Solar System Orrery</title>
<style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
        font-family: Arial, sans-serif;
        background: #e2e8dd;
        color: #1a1a1a;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 15px;
    }

    h1 { 
        color: #2c5f6f; 
        margin: 15px 0; 
        text-align: center; 
        font-size: clamp(1.6rem, 5vw, 2.4rem);
    }

    .wrapper {
        display: flex;
        flex-direction: row;
        gap: 30px;
        max-width: 1400px;
        width: 100%;
        flex: 1;
    }

    @media (max-width: 900px) {
        .wrapper {
            flex-direction: column;
            gap: 20px;
        }
        .controls {
            width: 100%;
            max-width: 500px;
            margin: 0 auto;
        }
    }

    #canvasContainer {
        position: relative;
        width: 100%;
        max-width: 800px;
        aspect-ratio: 1 / 1;
        margin: 0 auto;
        border: 2px solid #2c5f6f;
        border-radius: 8px;
        overflow: hidden;
        background: #f5f8f4;
    }

    canvas {
        position: absolute;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        display: block;
    }

    .controls {
        background: #d4dcd6;
        padding: 20px;
        border-radius: 8px;
        width: 320px;
        flex-shrink: 0;
    }

    label { 
        display: block; 
        color: #2c5f6f; 
        font-weight: bold; 
        margin-bottom: 8px; 
    }

    input, button {
        padding: 10px;
        margin: 6px 0;
        border-radius: 4px;
        font-size: 1rem;
    }

    input[type="date"] {
        width: 100%;
        background: #e2e8dd;
        border: 1px solid #b0bfb5;
        color: #1a1a1a;
    }

    button {
        padding: 12px 18px;
        min-width: 88px;
        background: #4dd0e1;
        border: none;
        color: #1a1a1a;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        touch-action: manipulation;
    }

    button:hover { background: #80deea; }

    .legend {
        background: #d4dcd6;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 8px 0;
        font-size: 13px;
    }

    .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    #dateDisplay {
        font-size: 1.2rem;
        font-weight: bold;
        color: #2c5f6f;
        padding: 12px;
        background: #d4dcd6;
        border-radius: 8px;
        margin-bottom: 15px;
        text-align: center;
    }
</style>
</head>
<body>
<h1>ProBan Interactive Solar System</h1>

<div id="dateDisplay">Jan 15, 2026</div>

<div class="wrapper">
    <div id="canvasContainer">
        <canvas id="canvas"></canvas>
    </div>

    <div class="controls">
        <label for="dateInput">Select Date:</label>
        <input type="date" id="dateInput" value="2026-01-15">

        <div style="margin: 15px 0;">
            <button onclick="orrery.setToday()">Today</button>
            <button onclick="orrery.skipBack('year')">« Year</button>
            <button onclick="orrery.skipBack('month')">« Month</button>
            <button onclick="orrery.skipBack('day')">« Day</button>
            <button onclick="orrery.skipFwd('day')">Day »</button>
            <button onclick="orrery.skipFwd('month')">Month »</button>
            <button onclick="orrery.skipFwd('year')">Year »</button>
        </div>

        <div style="margin: 15px 0;">
            <button id="playBtn" onclick="orrery.toggleAnimation()">Play</button>
            <button onclick="orrery.toggleDirection()">Reverse</button>
        </div>

        <div style="margin: 15px 0;">
            <button onclick="orrery.setZoom('inner')">Inner</button>
            <button onclick="orrery.setZoom('visible')">Visible</button>
            <button onclick="orrery.setZoom('outer')">Outer</button>
        </div>

        <div>
            <label><input type="checkbox" id="showLabels" checked> Show Labels</label>
            <label><input type="checkbox" id="showPluto" checked> Show Pluto</label>
        </div>

        <div class="legend">
            <strong>Planets</strong>
            <div class="legend-item"><div class="dot" style="background: #ffff00"></div>Sun</div>
            <div class="legend-item"><div class="dot" style="background: #808080"></div>Mercury</div>
            <div class="legend-item"><div class="dot" style="background: #ffcc00"></div>Venus</div>
            <div class="legend-item"><div class="dot" style="background: #4d94ff"></div>Earth</div>
            <div class="legend-item"><div class="dot" style="background: #ff4d4d"></div>Mars</div>
            <div class="legend-item"><div class="dot" style="background: #daa520"></div>Jupiter</div>
            <div class="legend-item"><div class="dot" style="background: #f0e68c"></div>Saturn</div>
            <div class="legend-item"><div class="dot" style="background: #4dd0e1"></div>Uranus</div>
            <div class="legend-item"><div class="dot" style="background: #4d7eff"></div>Neptune</div>
            <div class="legend-item"><div class="dot" style="background: #999"></div>Pluto</div>
        </div>
    </div>
</div>

<script>
// Complete mobile-friendly Orrery class
class Orrery {
    constructor() {
        this.canvas = document.getElementById('canvas');
        this.ctx = this.canvas.getContext('2d');
        this.currentDate = new Date(2026, 0, 15);
        this.animating = false;
        this.animationDirection = 1;
        this.zoomLevel = 'inner';

        this.dpr = window.devicePixelRatio || 1;
        this.centerX = 400;
        this.centerY = 400;
        this.baseScale = 1;

        this.planets = [
            {name: 'Mercury', a: 0.387, period: 87.97,   color: '#808080', radius: 6},
            {name: 'Venus',   a: 0.723, period: 224.7,   color: '#ffcc00', radius: 10},
            {name: 'Earth',   a: 1.0,   period: 365.25,  color: '#4d94ff', radius: 10},
            {name: 'Mars',    a: 1.524, period: 687,     color: '#ff4d4d', radius: 8},
            {name: 'Jupiter', a: 5.2,   period: 4333,    color: '#daa520', radius: 15},
            {name: 'Saturn',  a: 9.54,  period: 10759,   color: '#f0e68c', radius: 14},
            {name: 'Uranus',  a: 19.19, period: 30688,   color: '#4dd0e1', radius: 10},
            {name: 'Neptune', a: 30.07, period: 60182,   color: '#4d7eff', radius: 10},
            {name: 'Pluto',   a: 39.48, period: 90588,   color: '#999',    radius: 6}
        ];

        this.setupEventListeners();
        this.setupResize();
        this.resizeCanvas();
        this.updateDisplay();
        this.draw();
    }

    setupEventListeners() {
        document.getElementById('dateInput').addEventListener('change', (e) => {
            this.currentDate = new Date(e.target.value + 'T00:00:00');
            this.updateDisplay();
            this.draw();
        });
        document.getElementById('showLabels').addEventListener('change', () => this.draw());
        document.getElementById('showPluto').addEventListener('change', () => this.draw());
    }

    setupResize() {
        window.addEventListener('resize', () => {
            this.resizeCanvas();
            this.draw();
        });
    }

    resizeCanvas() {
        const rect = this.canvas.getBoundingClientRect();
        const width = rect.width;
        const height = rect.height;

        this.canvas.width = width * this.dpr;
        this.canvas.height = height * this.dpr;

        this.ctx.scale(this.dpr, this.dpr);

        this.centerX = width / 2;
        this.centerY = height / 2;
        this.baseScale = Math.min(width, height) / 85; // tune 75–100 depending on preference
    }

    updateDisplay() {
        const options = { year: 'numeric', month: 'short', day: 'numeric' };
        document.getElementById('dateDisplay').textContent = 
            this.currentDate.toLocaleDateString('en-US', options);
        document.getElementById('dateInput').value = 
            this.currentDate.toISOString().split('T')[0];
    }

    setToday() { 
        this.currentDate = new Date(); 
        this.updateDisplay(); 
        this.draw(); 
    }

    skipBack(unit) {
        if(unit === 'day')   this.currentDate.setDate(this.currentDate.getDate() - 1);
        else if(unit === 'month') this.currentDate.setMonth(this.currentDate.getMonth() - 1);
        else this.currentDate.setFullYear(this.currentDate.getFullYear() - 1);
        this.updateDisplay(); this.draw();
    }

    skipFwd(unit) {
        if(unit === 'day')   this.currentDate.setDate(this.currentDate.getDate() + 1);
        else if(unit === 'month') this.currentDate.setMonth(this.currentDate.getMonth() + 1);
        else this.currentDate.setFullYear(this.currentDate.getFullYear() + 1);
        this.updateDisplay(); this.draw();
    }

    toggleAnimation() {
        this.animating = !this.animating;
        document.getElementById('playBtn').textContent = this.animating ? 'Pause' : 'Play';
        if (this.animating) this.animate();
    }

    toggleDirection() { this.animationDirection *= -1; }

    setZoom(level) { 
        this.zoomLevel = level; 
        this.draw(); 
    }

    getDaysSinceJ2000() {
        const J2000 = new Date('2000-01-01T12:00:00Z');
        return (this.currentDate - J2000) / (1000 * 60 * 60 * 24);
    }

    getPlanetAngle(planet) {
        const days = this.getDaysSinceJ2000();
        const n = (days / planet.period) * 360;
        return (n % 360) * Math.PI / 180;
    }

    drawPlanet(planet, scaleFactor) {
        const angle = this.getPlanetAngle(planet);
        const orbitRadius = planet.a * scaleFactor * this.baseScale;
        const x = this.centerX + orbitRadius * Math.cos(angle);
        const y = this.centerY + orbitRadius * Math.sin(angle);

        this.ctx.fillStyle = planet.color;
        this.ctx.beginPath();
        this.ctx.arc(x, y, planet.radius * 1.1, 0, 2 * Math.PI);
        this.ctx.fill();

        if (document.getElementById('showLabels').checked) {
            this.ctx.fillStyle = '#333';
            this.ctx.font = `${Math.max(11, 13 * (this.baseScale / 8))}px Arial`;
            this.ctx.fillText(planet.name, x + 16, y + 5);
        }
    }

    drawOrbit(planet, scaleFactor) {
        const radius = planet.a * scaleFactor * this.baseScale;
        this.ctx.strokeStyle = 'rgba(50, 80, 100, 0.3)';
        this.ctx.lineWidth = 1.5;
        this.ctx.beginPath();
        this.ctx.arc(this.centerX, this.centerY, radius, 0, 2 * Math.PI);
        this.ctx.stroke();
    }

    draw() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

        // Sun
        this.ctx.fillStyle = '#ffff00';
        this.ctx.beginPath();
        this.ctx.arc(this.centerX, this.centerY, 10 * this.baseScale, 0, 2 * Math.PI);
        this.ctx.fill();

        let scaleFactor;
        if      (this.zoomLevel === 'inner')   scaleFactor = 55;
        else if (this.zoomLevel === 'visible') scaleFactor = 28;
        else                                   scaleFactor = 7.8;

        if (window.innerWidth < 500) scaleFactor *= 1.25;

        const planetsToShow = document.getElementById('showPluto').checked 
            ? this.planets 
            : this.planets.slice(0, 8);

        // Orbits first
        for (let p of planetsToShow) {
            this.drawOrbit(p, scaleFactor);
        }

        // Planets on top
        for (let p of planetsToShow) {
            this.drawPlanet(p, scaleFactor);
        }
    }

    animate() {
        if (!this.animating) return;
        this.currentDate.setDate(this.currentDate.getDate() + this.animationDirection);
        this.updateDisplay();
        this.draw();
        requestAnimationFrame(() => this.animate());
    }
}

const orrery = new Orrery();
</script>

<footer style="margin-top: 30px; padding: 15px; text-align: center; font-size: 13px; color: #666; border-top: 1px solid #ccc; width: 100%;">
    <p><strong>Inspiration Credits:</strong></p>
    <p>Solar System Live • jsOrrery • Solar System Scope • NASA Eyes on the Solar System</p>
    <p>Created by ProBan with help from AI • Educational fun project</p>
</footer>
</body>
</html>
